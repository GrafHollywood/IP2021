<div class="container">
  <ng-container *ngIf="valve && execution; else elseTemplate">
    <div class="row">
      <div class="col-12 py-2">
        <button class="btn btn-danger me-2" (click)="onDelete()">Удалить</button>
        <button class="btn btn-primary" [routerLink]="'edit'">Редактировать</button>
      </div>
      <main class="col-md-8">
        <h1 class="display-2">{{valve.Model}}</h1>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Материал: {{valve.Main_Material}}</li>
          <li class="list-group-item">Назначение: {{valve.Purpose}}</li>
          <li class="list-group-item">Тип привода: {{valve.Type_drive}}</li>
          <li class="list-group-item">Рабочая среда: {{valve.Work_Enviroment}}</li>
          <li class="list-group-item">Номинальное давление (PN): {{valve.Pressure}}</li>
          <li class="list-group-item">Класс герметичности: {{valve.tightness_class}}</li>
          <li class="list-group-item">Климатические условия: {{valve.climate_conditions}}</li>
        </ul>
      </main>
      <div class="image col-md-4">
        <img class="border  rounded-3 w-100" src="{{valve.img}}" alt="{{valve.Model}}">
      </div>
      <div class="col-md-6">
        <h2 class="display-5">Материалы клапана</h2>
        <table class="table table-bordered table-hover ">
          <thead>
            <tr class="table-secondary">
              <th scope="col">Деталь</th>
              <th scope="col">Материал</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="valve.Cap_Material">
              <td>Крышка</td>
              <td>{{valve.Cap_Material}}</td>
            </tr>
            <tr *ngIf="valve.Body_Material">
              <td>Корпус</td>
              <td>{{valve.Body_Material}}</td>
            </tr>
            <tr *ngIf="valve.OilSeal_Material">
              <td>Сальник</td>
              <td>{{valve.OilSeal_Material}}</td>
            </tr>
            <tr *ngIf="valve.OilSealPack_Material">
              <td>Сальниковая набивка</td>
              <td>{{valve.OilSealPack_Material}}</td>
            </tr>
            <tr *ngIf="valve.Spindle_Material">
              <td>Шпиндель</td>
              <td>{{valve.Spindle_Material}}</td>
            </tr>
            <tr *ngIf="valve.Sealer_Material">
              <td>Уплотнитель</td>
              <td>{{valve.Sealer_Material}}</td>
            </tr>
            <tr *ngIf="valve.Gasket_Material">
              <td>Прокладка</td>
              <td>{{valve.Gasket_Material}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-12">
        <h2 class="display-5">Исполнения клапана</h2>
        <div class="table-responsive">
          <table class="table table-bordered table-striped table-hover">
            <thead>
              <tr class="table-secondary">
                <th class="text-center">DN, мм</th>
                <th class="text-center">L, мм</th>
                <th class="text-center">H, мм</th>
                <th class="text-center">n</th>
                <th class="text-center">d, мм</th>
                <th class="text-center">D1, мм</th>
                <th class="text-center">D2, мм</th>
                <th class="text-center">Масса, кг</th>
                <th class="text-center">Тип присоединения</th>
                <th class="text-center"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let exec of execution">
                <th class="text-center">{{exec.D}}</th>
                <td class="text-center">{{exec.L}}</td>
                <td class="text-center">{{exec.H}}</td>
                <td class="text-center">{{exec.n_connect}}</td>
                <td class="text-center">{{exec.d_connect}}</td>
                <td class="text-center">{{exec.D1_connect}}</td>
                <td class="text-center">{{exec.D2_connect}}</td>
                <td class="text-center">{{exec.Weight}}</td>
                <td class="text-center">{{exec.Type_connect}}</td>
                <td class="text-center">
                  <button class="btn btn-secondary m-1">
                    <i class="bi bi-gear"></i>
                  </button>
                  <button class="btn btn-danger m-1" (click)="onDeleteExecution(exec.D)">
                    <i class="bi bi-x-circle"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="col-12">
          <button class="btn btn-primary" (click)="addExecution()">Добавить исполнение</button>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #elseTemplate>
    <app-loader></app-loader>
  </ng-template>
</div>
